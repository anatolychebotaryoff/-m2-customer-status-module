<?php
/**
 * Magento Enterprise Edition
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Magento Enterprise Edition License
 * that is bundled with this package in the file LICENSE_EE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://www.magentocommerce.com/license/enterprise-edition
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     default_default
 * @copyright   Copyright (c) 2012 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://www.magentocommerce.com/license/enterprise-edition
 */
?>
<?php
$_element = $this->getElement();
$_note    = $_element->getNote();
$_trId    = $_element->getHtmlId();
$_class   = $_element->getFieldsetHtmlClass();
?>

<?php if (!$_element->getNoDisplay()): ?>
<tr<?php if($_trId): ?> id="<?php echo 'row_'.$_trId ?>"<?php endif; ?>>
    <?php if ($_element->getType()=='hidden'): ?>
    <td colspan="2" class="hidden"><?php echo trim($_element->getElementHtml()) ?></td>
    <?php else: ?>
    <td class="label<?php echo $_class ? " {$_class}-label" : ''?>"><?php echo trim($_element->getLabelHtml()) ?></td>
    <td class="<?php echo $_element->hasValueClass() ? $_element->getValueClass() : 'value' ?><?php echo $_class ? " {$_class}-value" : ''?>">
        <span class="product-sku-param">
            <span class="element-sku">
                <?php echo trim($_element->getElementHtml()) ?>
                <a href="javascript:void(0)" class="product-chooser-trigger"><img src="/skin/adminhtml/default/enterprise/images/rule_chooser_trigger.gif" alt="" class="v-middle product-chooser-trigger" title="Open Chooser" style="<?php if($_element->getDisabled()){echo ' display: none; ';} ?>"></a>
            </span>
        </span>
        <?php if ($_note): ?>
            <p class="note<?php echo $_class ? " {$_class}-note" : ''?>" id="note_<?php echo $_element->getId()?>"><span><?php echo $_note ?></span></p>
        <?php endif ?>
    </td>
    <?php echo $this->displayUseDefault() ?>
    <?php endif; ?>
    <script type="text/javascript">
        <?php echo $_element->getHtmlId() ?> = new VarienPreviewCartSkuForm('<?php echo 'row_'.$_element->getHtmlId() ?>', '<?php echo $this->getNewChildUrl() ?>');
        <?php if ($_element->getReadonly()): ?>
        <?php echo $_element->getHtmlId() ?>.setReadonly(true);
        <?php endif; ?>
    </script>
</tr>
<tr>
    <td colspan="4">
        <div style="display: none; clear: both;" class="product-chooser-sku"  url="<?php echo $this->getUrl('adminhtml/config/chooser',array('attribute'=>'sku','form'=> $_element->getHtmlId())); ?>"></div>
    </td>
</tr>
<?php endif; ?>
